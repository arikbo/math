<!DOCTYPE html>
<html lang="he" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תרגול מספרים מכוונים</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: left; direction: ltr; }
        .exercise { font-size: 24px; margin: 10px; padding: 10px; background: #f0f8ff; border-radius: 10px; display: inline-block; width: 90%; }
        input { font-size: 20px; width: 80px; text-align: center; margin-right: 10px; }
        .correct { color: green; font-weight: bold; }
        .incorrect { color: red; font-weight: bold; }
        .result { font-size: 20px; margin-top: 20px; }
        .new-try { font-size: 18px; padding: 10px; margin-top: 20px; cursor: pointer; background: blue; color: white; border: none; border-radius: 5px; }
        footer { margin-top: 20px; font-size: 14px; color: gray; }
    </style>
</head>
<body>
    <h1>תרגול מספרים מכוונים</h1>
    <div id="exercises"></div>
    <button class="new-try" onclick="generateExercises()">ניסיון חדש</button>
    <div id="score" class="result"></div>
    <footer>האתר נבנה על ידי אריק בוריסי ©️</footer>

    <script>
        function generateExercises() {
            const operators = ['+', '-', '*', '/'];
            const exercisesDiv = document.getElementById('exercises');
            exercisesDiv.innerHTML = '';
            window.correctAnswers = 0;
            window.totalQuestions = 10;
            
            for (let i = 0; i < 10; i++) {
                let num1 = Math.floor(Math.random() * 21) - 10;
                let num2 = Math.floor(Math.random() * 21) - 10;
                let op = operators[Math.floor(Math.random() * operators.length)];
                
                if (op === '/' && num2 === 0) num2 = 1; 
                
                let expression = `${num1} ${op} ${num2}`;
                let solution = eval(expression);
                
                let div = document.createElement('div');
                div.className = 'exercise';
                div.innerHTML = `
                    \$begin:math:text$${num1} ${op} ${num2}\\$end:math:text$ = <input type="text" oninput="checkAnswer(this, ${solution})">
                    <span class="feedback"></span>
                `;
                exercisesDiv.appendChild(div);
            }

            MathJax.typeset(); // מרענן את MathJax כדי להציג את הנוסחאות
        }

        function checkAnswer(input, correctAnswer) {
            let feedback = input.nextElementSibling;
            if (input.value.trim() !== "") {
                if (parseFloat(input.value) === correctAnswer) {
                    feedback.innerHTML = '✔';
                    feedback.className = 'correct';
                    window.correctAnswers++;
                } else {
                    feedback.innerHTML = '✖';
                    feedback.className = 'incorrect';
                }
                updateScore();
            } else {
                feedback.innerHTML = '';
            }
        }
        
        function updateScore() {
            let scoreDiv = document.getElementById('score');
            let percentage = (window.correctAnswers / window.totalQuestions) * 100;
            scoreDiv.innerHTML = `נכונות: ${window.correctAnswers} מתוך ${window.totalQuestions} (ציון: ${percentage.toFixed(1)}%)`;
        }
        
        window.onload = generateExercises;
    </script>
</body>
</html>
